<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>طلبات المطبخ</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container">
  <h1>طلبات المطبخ</h1>
  <div id="ordersContainer" class="d-flex flex-wrap justify-content-center"></div>
</div>

<script>
const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbze-2mORZyRdWhAlGOH3j3mhYm22pAzfYCalbOOs7r17Edo3evDLgqPTY9edgh4m0Rb/exec"; // نفس رابط الويب آب

function loadOrders() {
  fetch(WEBAPP_URL)
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById('ordersContainer');
      container.innerHTML = '';
      let pending = data.filter(o => o.status === "pending");
      
      pending.forEach(order => {
        const div = document.createElement('div');
        div.className = 'border rounded p-3 m-2';
        let itemsStr = order.items.map(i => `${i.item} × ${i.qty}`).join("<br>");
        div.innerHTML = `<h3>طلب #${order.id}</h3>
                         <p>${itemsStr}</p>
                         <p><strong>المجموع: ${order.total} ليرة</strong></p>`;
        container.appendChild(div);
      });

      if (pending.length === 0) {
        container.innerHTML = "<h2>لا توجد طلبات حالياً ✅</h2>";
      }
    });
}

setInterval(loadOrders, 5000);
loadOrders();
</script>
</body>
</html>
