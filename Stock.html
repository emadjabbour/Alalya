<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>إدارة الأصناف</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <h1>إدارة الأصناف</h1>

  <h3 class="mt-3">إضافة صنف جديد</h3>
  <div class="text-center mb-3">
    <input type="text" id="newItemName" placeholder="اسم الصنف" class="form-control d-inline-block w-auto">
    <input type="number" id="newItemPrice" placeholder="السعر بالليرة" class="form-control d-inline-block w-auto">
    <button class="btn btn-success" onclick="addNewItem()">إضافة</button>
  </div>

  <h3 class="mt-4">تعديل أو إزالة الأصناف</h3>
  <div class="table-container">
    <table class="table table-bordered text-center">
      <thead>
        <tr>
          <th>الصنف</th>
          <th>السعر الحالي</th>
          <th>السعر الجديد</th>
          <th>تعديل</th>
          <th>حذف</th>
        </tr>
      </thead>
      <tbody id="stockTable"></tbody>
    </table>
  </div>

  <div class="nav-buttons">
    <button class="btn btn-primary" onclick="goBack()">العودة للكاشير</button>
  </div>
</div>

<script>
let prices = JSON.parse(localStorage.getItem('prices')) || {
  'نقانق': 10000,
  'نقانق سمون': 15000,
  'بطاطا': 8000,
  'شيش': 12000,
  'شيش سمون': 18000
};

function renderTable() {
  const table = document.getElementById('stockTable');
  table.innerHTML = '';
  Object.keys(prices).forEach(item => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${item}</td>
      <td>${prices[item]}</td>
      <td><input type="number" id="newPrice_${item}" placeholder="السعر الجديد" class="form-control"></td>
      <td><button class="btn btn-warning" onclick="updatePrice('${item}')">تعديل</button></td>
      <td><button class="btn btn-danger" onclick="removeItem('${item}')">حذف</button></td>
    `;
    table.appendChild(tr);
  });
  localStorage.setItem('prices', JSON.stringify(prices));
}

function addNewItem() {
  const name = document.getElementById('newItemName').value.trim();
  const price = parseInt(document.getElementById('newItemPrice').value);
  if (!name || isNaN(price) || price <= 0) { alert('ادخل اسم الصنف والسعر الصحيح!'); return; }
  prices[name] = price;
  document.getElementById('newItemName').value = '';
  document.getElementById('newItemPrice').value = '';
  renderTable();
  alert('تمت إضافة الصنف بنجاح!');
}

function updatePrice(item) {
  const newPrice = parseInt(document.getElementById('newPrice_' + item).value);
  if (isNaN(newPrice) || newPrice <= 0) { alert('ادخل سعر صالح للتعديل!'); return; }
  prices[item] = newPrice;
  renderTable();
  alert('تم تعديل السعر بنجاح!');
}

function removeItem(item) {
  if (confirm(`هل أنت متأكد من حذف الصنف "${item}"؟`)) {
    delete prices[item];
    renderTable();
    alert('تم حذف الصنف بنجاح!');
  }
}

function goBack() { window.location.href = 'index.html'; }

renderTable();
</script>

</body>
</html>
